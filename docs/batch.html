<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fugaku Open OnDemand User Manual</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>

  <div class="container-fluid">
    <nav class="sidebar bg-body-secondary">
      <h5 class="ps-3 pe-1 d-inline">Table of Contents</h5><a href="batch_ja.html" style="font-size: 0.75rem;" class="text-decoration-none ms-0">[Japanese]</a>
      <ul class="nav flex-column px-3 py-2">
        <li class="nav-item"><a href="index.html" class="nav-link">1. Introduction</a></li>
        <li class="nav-item"><a href="dashboard.html" class="nav-link">2. Dashboard Layout</a></li>
        <li class="nav-item"><a href="interactive.html" class="nav-link">3. Interactive Applications</a></li>
        <li class="nav-item"><a href="batch.html" class="nav-link">4. Batch Jobs</a></li>
        <li class="nav-item"><a href="passenger.html" class="nav-link">5. Passenger Apps</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#file" class="nav-link">5.1. File Operations</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#hpci" class="nav-link">5.2. HPCI Shared Storage</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#gakunin" class="nav-link">5.3. GakuNin RDM</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#shell" class="nav-link">5.4. Shell Access</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#composer" class="nav-link">5.5. Open Composer</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#active" class="nav-link">5.6. Job Monitoring</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#budget" class="nav-link">5.7. Budget Usage</a></li>
        <li class="nav-item ms-3"><a href="passenger.html#disk" class="nav-link">5.8. Disk Usage</a></li>
        <li class="nav-item"><a href="supplement.html" class="nav-link">6. Supplement</a></li>
      </ul>
    </nav>

    <main class="main-content">
      <h2>4. Batch Jobs</h2>
      <p>
        A batch job is a computing task executed non-interactively by a job scheduler.
        Batch jobs are written in shell scripts, and the required computing resources (such as the number of nodes or maximum runtime) are explicitly specified using job scheduler directives (e.g., <code>#SBATCH -N 4</code>).
        In Fugaku Open OnDemand, we use an application running on Open OnDemand called <a href="https://github.com/RIKEN-RCCS/OpenComposer/">Open Composer</a>,
        and provide templates for the following batch jobs.
      </p>
      <table class="table">
        <tr><th>Category</th><th>Application</th></tr>
        <tr><td>Climate</td><td>SCALE</td></tr>
        <tr><td>Computer Aided Engineering</td><td>FDS, FFVHC-ACE, FrontFlow (blue/X), FrontISTR, OpenFOAM (Foundation/OpenCFD)</td></tr>
        <tr><td>Condensed Matter Physics</td><td>ALAMODE, AkaiKKR, H&Phi;, mVMC, OpenMX, PHASE/0, Quantum Espresso, SALMON</td></tr>
        <tr><td>Experimental Data Processing</td><td>KIERTÄÄ</td></tr>
        <tr><td>Molecular Dynamics</td><td>GENESIS, GROMACS, LAMMPS, MODYLAS, PIMD</td></tr>
        <tr><td>Quantum Chemistry</td><td>ABINIT-MP, Gaussian, NTChem, SMASH</td></tr>
        <tr><td>Quantum Simulation</td><td>braket</td></tr>
        <tr><td>Other</td><td>Fujitsu TCS, Slurm</td></tr>
      </table>
      <p>
        As an example, here is how to use <a href="https://pages.nist.gov/fds-smv/index.html">FDS (Fire Dynamics Simulator)</a>. 
        From the menu bar, select "Batch Jobs" &rarr; "FDS".
      </p>
      <img width="400" alt="Click FDS" src="img/fds_click.png">
      <p>
        A web form for generating a job script will appear. The top-right fields are common across applications: "Script Location" specifies where the script will be saved, "Script Name" is the file name, and "Job Name" is an optional job title. The lower-left section contains application-specific inputs, which automatically update the job script preview on the lower right. After filling in the form, click "Submit" to submit the job to Fugaku.
      </p>
      <img width="600" alt="Web form of FDS" src="img/fds_webform.png">
      <p>
        If the job is successfully submitted, click the link to the "History page" that appears near the top.
      </p>
      <img width="400" alt="Link to History Page" src="img/link_to_history.png">
      <p>
        On the History page, you can view past job submissions. Each row in the table represents one job entry.
      </p>
      <p>
        The "Cancel Job" and "Delete Info" buttons at the top-left are used to cancel a running job or delete a job entry from the table, respectively. To use these buttons, check the checkbox in the leftmost column of the job row.
      </p>
      <p>
        The text input and radio buttons at the top-right are used to filter jobs shown in the table. Entering text in the "Filter" field narrows the list to jobs that include that text. The "All", "Running", "Queued", and "Completed" radio buttons filter by job status. The "Fugaku" and "Prepost" radio buttons filter jobs by system.
      </p>
      <img width="600" alt="History Page" src="img/history.png">
      <p>
        Clicking the link in the "Job ID" column shows profiling data retrieved from the job scheduler.
      </p>
      <img width="400" alt="Job ID in History Page" src="img/history_jobid.png">
      <p>
        Clicking the link in the "Application" column opens the application page. The icon next to it represents visualization applications registered in Open OnDemand; clicking it launches a web form for that application.
      </p>
      <p>
        Clicking the link in the "Script Location" column opens the Open OnDemand <a href="passenger.html#file">Home Directory</a>. Clicking the terminal icon next to it opens the <a href="passenger.html#shell">Shell Access</a>.
      </p>
      <img width="400" alt="Home Directory" src="img/home_directory.png">
      <img width="400" alt="Shell Access" src="img/shell_access.png">
      <p>
        Clicking the link in the "Script Name" column opens a window showing the contents of the submitted shell script. Clicking the "Load Parameters" button in that window opens the application page with the parameters loaded.
      </p>
      <img width="400" alt="Load Parameters" src="img/history_load_parameters.png">
    </main>
  </div>

  <footer class="text-muted text-center" style="background-color: darkblue;">
    <p>&copy; RIKEN Center for Computational Science</p>
  </footer>
</body>
</html>
